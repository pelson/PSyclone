<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PSyclone: psyclone.dynamo0p3.DynInvoke Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="psyclone_v1.0_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSyclone
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classpsyclone_1_1dynamo0p3_1_1DynInvoke.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">psyclone.dynamo0p3.DynInvoke Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for psyclone.dynamo0p3.DynInvoke:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1dynamo0p3_1_1DynInvoke__inherit__graph.png" border="0" usemap="#psyclone_8dynamo0p3_8DynInvoke_inherit__map" alt="Inheritance graph"/></div>
<map name="psyclone_8dynamo0p3_8DynInvoke_inherit__map" id="psyclone_8dynamo0p3_8DynInvoke_inherit__map">
<area shape="rect" id="node2" href="classpsyclone_1_1psyGen_1_1Invoke.html" title="psyclone.psyGen.Invoke" alt="" coords="28,80,195,107"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for psyclone.dynamo0p3.DynInvoke:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1dynamo0p3_1_1DynInvoke__coll__graph.png" border="0" usemap="#psyclone_8dynamo0p3_8DynInvoke_coll__map" alt="Collaboration graph"/></div>
<map name="psyclone_8dynamo0p3_8DynInvoke_coll__map" id="psyclone_8dynamo0p3_8DynInvoke_coll__map">
<area shape="rect" id="node2" href="classpsyclone_1_1psyGen_1_1Invoke.html" title="psyclone.psyGen.Invoke" alt="" coords="28,80,195,107"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97084217eb37cd1528c75dccf23e0042"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a97084217eb37cd1528c75dccf23e0042">__init__</a> (self, alg_invocation, idx)</td></tr>
<tr class="separator:a97084217eb37cd1528c75dccf23e0042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c00f3b2e12152ef697bd6c70e89f80"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">unique_proxy_declarations</a> (self, datatype, access=None)</td></tr>
<tr class="separator:ae9c00f3b2e12152ef697bd6c70e89f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4319b398ff9289af1927513ffb4dd892"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892">arg_for_funcspace</a> (self, fspace)</td></tr>
<tr class="separator:a4319b398ff9289af1927513ffb4dd892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c703b366986387918a888c33f37d34"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34">unique_fss</a> (self)</td></tr>
<tr class="separator:ad7c703b366986387918a888c33f37d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75572ca91c2786ed836e6657b2cec4b8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a75572ca91c2786ed836e6657b2cec4b8">is_coloured</a> (self)</td></tr>
<tr class="separator:a75572ca91c2786ed836e6657b2cec4b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e69798a97d7a7e659386a8e6b932080"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080">iterate_over_dofs_only</a> (self)</td></tr>
<tr class="separator:a8e69798a97d7a7e659386a8e6b932080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a519fa7f3c8ff4eeee92d13289a3d613a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">field_on_space</a> (self, func_space)</td></tr>
<tr class="separator:a519fa7f3c8ff4eeee92d13289a3d613a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec1949a5d9f3852e2f5d65fe344cdc7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8ec1949a5d9f3852e2f5d65fe344cdc7">gen_code</a> (self, parent)</td></tr>
<tr class="separator:a8ec1949a5d9f3852e2f5d65fe344cdc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classpsyclone_1_1psyGen_1_1Invoke')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classpsyclone_1_1psyGen_1_1Invoke.html">psyclone.psyGen.Invoke</a></td></tr>
<tr class="memitem:a1a9626ecd1145f50791fd63bc5cb32ee inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a9626ecd1145f50791fd63bc5cb32ee"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__str__</b> (self)</td></tr>
<tr class="separator:a1a9626ecd1145f50791fd63bc5cb32ee inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de5344c28550a67f7f9d0c6b2c9ed3e inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Invoke.html#a5de5344c28550a67f7f9d0c6b2c9ed3e">__init__</a> (self, alg_invocation, idx, schedule_class, reserved_names=None)</td></tr>
<tr class="separator:a5de5344c28550a67f7f9d0c6b2c9ed3e inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6699fa93b458cffc4fa3874e0de2e1b inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab6699fa93b458cffc4fa3874e0de2e1b"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>name</b> (self)</td></tr>
<tr class="separator:ab6699fa93b458cffc4fa3874e0de2e1b inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c0291dd36ff5a5fddb230c079a80bb inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0c0291dd36ff5a5fddb230c079a80bb"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>alg_unique_args</b> (self)</td></tr>
<tr class="separator:ab0c0291dd36ff5a5fddb230c079a80bb inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ec704a73a35f61a2afa53950fc4a66b inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ec704a73a35f61a2afa53950fc4a66b"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>psy_unique_vars</b> (self)</td></tr>
<tr class="separator:a1ec704a73a35f61a2afa53950fc4a66b inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e09c41cafa5d17214833dc23aec52cf inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e09c41cafa5d17214833dc23aec52cf"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>psy_unique_var_names</b> (self)</td></tr>
<tr class="separator:a7e09c41cafa5d17214833dc23aec52cf inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff15d0cfff3adb378deeab161de6875 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afff15d0cfff3adb378deeab161de6875"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>schedule</b> (self)</td></tr>
<tr class="separator:afff15d0cfff3adb378deeab161de6875 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab112e9aa6c2193992b5fa76021001da2 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab112e9aa6c2193992b5fa76021001da2"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>schedule</b> (self, obj)</td></tr>
<tr class="separator:ab112e9aa6c2193992b5fa76021001da2 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78c95a6c82d422cb2a6def5c936076c inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Invoke.html#aa78c95a6c82d422cb2a6def5c936076c">unique_declarations</a> (self, datatype, access=None)</td></tr>
<tr class="separator:aa78c95a6c82d422cb2a6def5c936076c inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfab1a86fcdebaae406efa3c96696713 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Invoke.html#abfab1a86fcdebaae406efa3c96696713">first_access</a> (self, arg_name)</td></tr>
<tr class="separator:abfab1a86fcdebaae406efa3c96696713 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a4142f2b3d5beac3fbc6ee49a18811 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a> (self, datatype)</td></tr>
<tr class="separator:a21a4142f2b3d5beac3fbc6ee49a18811 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655ebaaa2397d6316ab225391186d501 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a655ebaaa2397d6316ab225391186d501"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>gen</b> (self)</td></tr>
<tr class="separator:a655ebaaa2397d6316ab225391186d501 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c62d595f399e3b170071c4f01929f53 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c62d595f399e3b170071c4f01929f53"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>gen_code</b> (self, parent)</td></tr>
<tr class="separator:a5c62d595f399e3b170071c4f01929f53 inherit pub_methods_classpsyclone_1_1psyGen_1_1Invoke"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8654de66b59a48553c1833ae75383f54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8654de66b59a48553c1833ae75383f54"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>stencil</b></td></tr>
<tr class="separator:a8654de66b59a48553c1833ae75383f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9089cde86f6e4a66f225e69a9736908"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9089cde86f6e4a66f225e69a9736908"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dofmaps</b></td></tr>
<tr class="separator:ac9089cde86f6e4a66f225e69a9736908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55d826e7486407d39d8a32434bbf07c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae55d826e7486407d39d8a32434bbf07c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cma_ops</b></td></tr>
<tr class="separator:ae55d826e7486407d39d8a32434bbf07c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20571a324859fc91f788347ffcb7330d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20571a324859fc91f788347ffcb7330d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>evaluators</b></td></tr>
<tr class="separator:a20571a324859fc91f788347ffcb7330d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae113c77719050f71e438a6f4015d0b9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae113c77719050f71e438a6f4015d0b9c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>meshes</b></td></tr>
<tr class="separator:ae113c77719050f71e438a6f4015d0b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad132c0d4e187455c08d35538e78c457"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad132c0d4e187455c08d35538e78c457"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>boundary_conditions</b></td></tr>
<tr class="separator:aad132c0d4e187455c08d35538e78c457"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">The Dynamo specific invoke class. This passes the Dynamo
specific schedule class to the base class so it creates the one we
require.  Also overrides the gen_code method so that we generate
dynamo specific invocation code.</pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l02892">2892</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a97084217eb37cd1528c75dccf23e0042"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>alg_invocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The Dynamo specific invoke class. This passes the Dynamo
specific schedule class to the base class so it creates the one we
require.  Also overrides the gen_code method so that we generate
dynamo specific invocation code.</pre><pre class="fragment">:param alg_invocation: node in the AST describing the invoke call
:type alg_invocation: :py:class:`psyclone.parse.InvokeCall`
:param int idx: the position of the invoke in the list of invokes \
        contained in the Algorithm
:raises GenerationError: if integer reductions are required in the \
                 psy-layer
</pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l02899">2899</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>

<p>References <a class="el" href="dynamo0p3_8py_source.html#l02950">psyclone.dynamo0p3.DynInvoke._alg_unique_qr_args</a>, <a class="el" href="dynamo0p3_8py_source.html#l02959">psyclone.dynamo0p3.DynInvoke._psy_unique_qr_vars</a>, <a class="el" href="dynamo0p1_8py_source.html#l00096">psyclone.dynamo0p1.DynInvoke._schedule</a>, <a class="el" href="dynamo0p3_8py_source.html#l01931">psyclone.dynamo0p3.DynMeshes._schedule</a>, <a class="el" href="dynamo0p3_8py_source.html#l02909">psyclone.dynamo0p3.DynInvoke._schedule</a>, <a class="el" href="dynamo0p3_8py_source.html#l02944">psyclone.dynamo0p3.DynInvoke.boundary_conditions</a>, <a class="el" href="dynamo0p3_8py_source.html#l02932">psyclone.dynamo0p3.DynInvoke.cma_ops</a>, <a class="el" href="dynamo0p3_8py_source.html#l02928">psyclone.dynamo0p3.DynInvoke.dofmaps</a>, <a class="el" href="dynamo0p3_8py_source.html#l02936">psyclone.dynamo0p3.DynInvoke.evaluators</a>, <a class="el" href="dynamo0p3_8py_source.html#l02940">psyclone.dynamo0p3.DynInvoke.meshes</a>, <a class="el" href="psyGen_8py_source.html#l00651">psyclone.psyGen.Invoke.psy_unique_vars()</a>, <a class="el" href="psyGen_8py_source.html#l00662">psyclone.psyGen.Invoke.schedule()</a>, and <a class="el" href="dynamo0p3_8py_source.html#l02924">psyclone.dynamo0p3.DynInvoke.stencil</a>.</p>
<div class="fragment"><div class="line"><a name="l02899"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a97084217eb37cd1528c75dccf23e0042"> 2899</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a97084217eb37cd1528c75dccf23e0042">__init__</a>(self, alg_invocation, idx):</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="stringliteral">        :param alg_invocation: node in the AST describing the invoke call</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="stringliteral">        :type alg_invocation: :py:class:`psyclone.parse.InvokeCall`</span></div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="stringliteral">        :param int idx: the position of the invoke in the list of invokes \</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="stringliteral">                        contained in the Algorithm</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="stringliteral">        :raises GenerationError: if integer reductions are required in the \</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="stringliteral">                                 psy-layer</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;        <span class="keywordflow">if</span> <span class="keyword">False</span>:  <span class="comment"># pylint: disable=using-constant-test</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a6c94745504665e2cddcf0967b3144305">_schedule</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynSchedule.html">DynSchedule</a>(<span class="keywordtype">None</span>)  <span class="comment"># for pyreverse</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        reserved_names_list = []</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        reserved_names_list.extend(STENCIL_MAPPING.values())</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        reserved_names_list.extend(VALID_STENCIL_DIRECTIONS)</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;        reserved_names_list.extend([<span class="stringliteral">&quot;omp_get_thread_num&quot;</span>,</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                                    <span class="stringliteral">&quot;omp_get_max_threads&quot;</span>])</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        Invoke.__init__(self, alg_invocation, idx, DynSchedule,</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;                        reserved_names=reserved_names_list)</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="comment"># The baseclass works out the algorithm code&#39;s unique argument</span></div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <span class="comment"># list and stores it in the self._alg_unique_args</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <span class="comment"># list. However, the base class currently ignores any stencil and qr</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="comment"># arguments so we need to add them in.</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <span class="comment"># initialise our invoke stencil information</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8654de66b59a48553c1833ae75383f54">stencil</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvokeStencil.html">DynInvokeStencil</a>(self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">schedule</a>)</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        <span class="comment"># Initialise the object holding all information on the dofmaps</span></div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <span class="comment"># required by this invoke.</span></div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ac9089cde86f6e4a66f225e69a9736908">dofmaps</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvokeDofmaps.html">DynInvokeDofmaps</a>(self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">schedule</a>)</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="comment"># Initialise the object holding all information on the column-</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        <span class="comment"># -matrix assembly operators required by this invoke.</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae55d826e7486407d39d8a32434bbf07c">cma_ops</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvokeCMAOperators.html">DynInvokeCMAOperators</a>(self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">schedule</a>)</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <span class="comment"># Initialise the object holding all information on the quadrature</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        <span class="comment"># and/or evaluators required by this invoke</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a20571a324859fc91f788347ffcb7330d">evaluators</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvokeBasisFns.html">DynInvokeBasisFns</a>(self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">schedule</a>)</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        <span class="comment"># Initialise the object holding all information related to meshes</span></div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="comment"># and inter-grid operations</span></div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae113c77719050f71e438a6f4015d0b9c">meshes</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynMeshes.html">DynMeshes</a>(self, self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b">psy_unique_vars</a>)</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <span class="comment"># Initialise the object holding information on any boundary-condition</span></div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <span class="comment"># kernel calls</span></div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aad132c0d4e187455c08d35538e78c457">boundary_conditions</a> = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvokeBoundaryConditions.html">DynInvokeBoundaryConditions</a>(self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">schedule</a>)</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="comment"># extend arg list</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        self._alg_unique_args.extend(self.stencil.unique_alg_vars)</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="comment"># adding in qr arguments</span></div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aef9784711c602aa93b7cd18247d485e3">_alg_unique_qr_args</a> = []</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">for</span> call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;            <span class="keywordflow">if</span> call.qr_required:</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                <span class="keywordflow">if</span> call.qr_text <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aef9784711c602aa93b7cd18247d485e3">_alg_unique_qr_args</a>:</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                    self._alg_unique_qr_args.append(call.qr_text)</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        self._alg_unique_args.extend(self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aef9784711c602aa93b7cd18247d485e3">_alg_unique_qr_args</a>)</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        <span class="comment"># we also need to work out the names to use for the qr</span></div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        <span class="comment"># arguments within the psy layer. These are stored in the</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        <span class="comment"># _psy_unique_qr_vars list</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a88f97e25ac522f7a8e084c7f278df82b">_psy_unique_qr_vars</a> = []</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="keywordflow">for</span> call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <span class="keywordflow">if</span> call.qr_required:</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                <span class="keywordflow">if</span> call.qr_name <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a88f97e25ac522f7a8e084c7f278df82b">_psy_unique_qr_vars</a>:</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;                    self._psy_unique_qr_vars.append(call.qr_name)</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        <span class="comment"># lastly, add in halo exchange calls and global sums if</span></div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        <span class="comment"># required. We only need to add halo exchange calls for fields</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        <span class="comment"># since operators are assembled in place and scalars don&#39;t</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        <span class="comment"># have halos. We only need to add global sum calls for scalars</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        <span class="comment"># which have a gh_sum access.</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <span class="keywordflow">if</span> Config.get().distributed_memory:</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;            <span class="comment"># halo exchange calls</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            <span class="keywordflow">for</span> loop <span class="keywordflow">in</span> self.schedule.loops():</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;                loop.create_halo_exchanges()</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;            <span class="comment"># global sum calls</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            <span class="keywordflow">for</span> loop <span class="keywordflow">in</span> self.schedule.loops():</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;                <span class="keywordflow">for</span> scalar <span class="keywordflow">in</span> loop.args_filter(</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                        arg_types=VALID_SCALAR_NAMES,</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;                        arg_accesses=VALID_REDUCTION_NAMES, unique=<span class="keyword">True</span>):</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                    <span class="keywordflow">if</span> scalar.type.lower() == <span class="stringliteral">&quot;gh_integer&quot;</span>:</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;                        <span class="keywordflow">raise</span> GenerationError(</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;                            <span class="stringliteral">&quot;Integer reductions are not currently supported &quot;</span></div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;                            <span class="stringliteral">&quot;by the LFRic infrastructure. Error found in &quot;</span></div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;                            <span class="stringliteral">&quot;Kernel &#39;{0}&#39;, argument &#39;{1}&#39;&quot;</span>.format(</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;                                scalar.call.name, scalar.name))</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;                    global_sum = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynGlobalSum.html">DynGlobalSum</a>(scalar, parent=loop.parent)</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;                    loop.parent.children.insert(loop.position+1, global_sum)</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a8654de66b59a48553c1833ae75383f54"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8654de66b59a48553c1833ae75383f54">psyclone.dynamo0p3.DynInvoke.stencil</a></div><div class="ttdeci">stencil</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02924">dynamo0p3.py:2924</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_a1ec704a73a35f61a2afa53950fc4a66b"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b">psyclone.psyGen.Invoke.psy_unique_vars</a></div><div class="ttdeci">def psy_unique_vars(self)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00651">psyGen.py:651</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ae113c77719050f71e438a6f4015d0b9c"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae113c77719050f71e438a6f4015d0b9c">psyclone.dynamo0p3.DynInvoke.meshes</a></div><div class="ttdeci">meshes</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02940">dynamo0p3.py:2940</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvokeCMAOperators_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvokeCMAOperators.html">psyclone.dynamo0p3.DynInvokeCMAOperators</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l01789">dynamo0p3.py:1789</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvokeBoundaryConditions_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvokeBoundaryConditions.html">psyclone.dynamo0p3.DynInvokeBoundaryConditions</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02865">dynamo0p3.py:2865</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a97084217eb37cd1528c75dccf23e0042"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a97084217eb37cd1528c75dccf23e0042">psyclone.dynamo0p3.DynInvoke.__init__</a></div><div class="ttdeci">def __init__(self, alg_invocation, idx)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02899">dynamo0p3.py:2899</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ac9089cde86f6e4a66f225e69a9736908"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ac9089cde86f6e4a66f225e69a9736908">psyclone.dynamo0p3.DynInvoke.dofmaps</a></div><div class="ttdeci">dofmaps</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02928">dynamo0p3.py:2928</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvokeDofmaps_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvokeDofmaps.html">psyclone.dynamo0p3.DynInvokeDofmaps</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l01626">dynamo0p3.py:1626</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a6c94745504665e2cddcf0967b3144305"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a6c94745504665e2cddcf0967b3144305">psyclone.dynamo0p3.DynInvoke._schedule</a></div><div class="ttdeci">_schedule</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02909">dynamo0p3.py:2909</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a88f97e25ac522f7a8e084c7f278df82b"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a88f97e25ac522f7a8e084c7f278df82b">psyclone.dynamo0p3.DynInvoke._psy_unique_qr_vars</a></div><div class="ttdeci">_psy_unique_qr_vars</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02959">dynamo0p3.py:2959</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynMeshes_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynMeshes.html">psyclone.dynamo0p3.DynMeshes</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l01899">dynamo0p3.py:1899</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_aad132c0d4e187455c08d35538e78c457"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aad132c0d4e187455c08d35538e78c457">psyclone.dynamo0p3.DynInvoke.boundary_conditions</a></div><div class="ttdeci">boundary_conditions</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02944">dynamo0p3.py:2944</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_afff15d0cfff3adb378deeab161de6875"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875">psyclone.psyGen.Invoke.schedule</a></div><div class="ttdeci">def schedule(self)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00662">psyGen.py:662</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynGlobalSum_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynGlobalSum.html">psyclone.dynamo0p3.DynGlobalSum</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03405">dynamo0p3.py:3405</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvokeStencil_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvokeStencil.html">psyclone.dynamo0p3.DynInvokeStencil</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l01442">dynamo0p3.py:1442</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_aef9784711c602aa93b7cd18247d485e3"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#aef9784711c602aa93b7cd18247d485e3">psyclone.dynamo0p3.DynInvoke._alg_unique_qr_args</a></div><div class="ttdeci">_alg_unique_qr_args</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02950">dynamo0p3.py:2950</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a20571a324859fc91f788347ffcb7330d"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a20571a324859fc91f788347ffcb7330d">psyclone.dynamo0p3.DynInvoke.evaluators</a></div><div class="ttdeci">evaluators</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02936">dynamo0p3.py:2936</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvokeBasisFns_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvokeBasisFns.html">psyclone.dynamo0p3.DynInvokeBasisFns</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02285">dynamo0p3.py:2285</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynSchedule_html"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynSchedule.html">psyclone.dynamo0p3.DynSchedule</a></div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03382">dynamo0p3.py:3382</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ae55d826e7486407d39d8a32434bbf07c"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae55d826e7486407d39d8a32434bbf07c">psyclone.dynamo0p3.DynInvoke.cma_ops</a></div><div class="ttdeci">cma_ops</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02932">dynamo0p3.py:2932</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a97084217eb37cd1528c75dccf23e0042_cgraph.png" border="0" usemap="#classpsyclone_1_1dynamo0p3_1_1DynInvoke_a97084217eb37cd1528c75dccf23e0042_cgraph" alt=""/></div>
<map name="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a97084217eb37cd1528c75dccf23e0042_cgraph" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a97084217eb37cd1528c75dccf23e0042_cgraph">
<area shape="rect" id="node2" href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b" title="psyclone.psyGen.Invoke.psy\l_unique_vars" alt="" coords="285,5,476,47"/>
<area shape="rect" id="node3" href="classpsyclone_1_1psyGen_1_1Invoke.html#afff15d0cfff3adb378deeab161de6875" title="psyclone.psyGen.Invoke.schedule" alt="" coords="269,71,492,98"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4319b398ff9289af1927513ffb4dd892"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.arg_for_funcspace </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fspace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns an argument object which is on the requested
function space. Searches through all Kernel calls in this
invoke. Currently the first argument object that is found is
used. Throws an exception if no argument exists. </pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03011">3011</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l03011"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892"> 3011</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892">arg_for_funcspace</a>(self, fspace):</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns an argument object which is on the requested</span></div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="stringliteral">        function space. Searches through all Kernel calls in this</span></div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="stringliteral">        invoke. Currently the first argument object that is found is</span></div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="stringliteral">        used. Throws an exception if no argument exists. &#39;&#39;&#39;</span></div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <span class="keywordflow">for</span> kern_call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                <span class="keywordflow">return</span> kern_call.arguments.get_arg_on_space(fspace)</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            <span class="keywordflow">except</span> FieldNotFoundError:</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;                <span class="keywordflow">pass</span></div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">raise</span> GenerationError(</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            <span class="stringliteral">&quot;No argument found on &#39;{0}&#39; space&quot;</span>.format(fspace.mangled_name))</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a4319b398ff9289af1927513ffb4dd892"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892">psyclone.dynamo0p3.DynInvoke.arg_for_funcspace</a></div><div class="ttdeci">def arg_for_funcspace(self, fspace)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03011">dynamo0p3.py:3011</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a519fa7f3c8ff4eeee92d13289a3d613a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.field_on_space </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func_space</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If a field exists on this space for any kernel in this
invoke then return that field. Otherwise return None. </pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03057">3057</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l03057"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a"> 3057</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">field_on_space</a>(self, func_space):</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; If a field exists on this space for any kernel in this</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="stringliteral">        invoke then return that field. Otherwise return None. &#39;&#39;&#39;</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        <span class="keywordflow">for</span> kern_call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;            field = <a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">field_on_space</a>(func_space, kern_call.arguments)</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;            <span class="keywordflow">if</span> field:</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;                <span class="keywordflow">return</span> field</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a519fa7f3c8ff4eeee92d13289a3d613a"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">psyclone.dynamo0p3.DynInvoke.field_on_space</a></div><div class="ttdeci">def field_on_space(self, func_space)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03057">dynamo0p3.py:3057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ec1949a5d9f3852e2f5d65fe344cdc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.gen_code </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generates Dynamo specific invocation code (the subroutine
called by the associated invoke call in the algorithm
layer). This consists of the PSy invocation subroutine and the
declaration of its arguments.
:param parent: The parent node in the AST (of the code to be \
       generated) to which the node describing the PSy \
       subroutine will be added
:type parent: :py:class:`psyclone.f2pygen.ModuleGen`
</pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03066">3066</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>

<p>References <a class="el" href="dynamo0p3_8py_source.html#l01379">psyclone.dynamo0p3.DynamoInvokes._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l01448">psyclone.dynamo0p3.DynInvokeStencil._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l01632">psyclone.dynamo0p3.DynInvokeDofmaps._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l01803">psyclone.dynamo0p3.DynInvokeCMAOperators._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l01920">psyclone.dynamo0p3.DynMeshes._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l02249">psyclone.dynamo0p3.DynInterGrid._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l02298">psyclone.dynamo0p3.DynInvokeBasisFns._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l03083">psyclone.dynamo0p3.DynInvoke._name_space_manager</a>, <a class="el" href="dynamo0p3_8py_source.html#l02959">psyclone.dynamo0p3.DynInvoke._psy_unique_qr_vars</a>, <a class="el" href="dynamo0p3_8py_source.html#l03011">psyclone.dynamo0p3.DynInvoke.arg_for_funcspace()</a>, <a class="el" href="dynamo0p3_8py_source.html#l03057">psyclone.dynamo0p3.DynInvoke.field_on_space()</a>, <a class="el" href="dynamo0p3_8py_source.html#l03046">psyclone.dynamo0p3.DynInvoke.iterate_over_dofs_only()</a>, <a class="el" href="expression_8py_source.html#l00139">psyclone.expression.FunctionVar.name</a>, <a class="el" href="expression_8py_source.html#l00247">psyclone.expression.NamedArg.name()</a>, <a class="el" href="psyGen_8py_source.html#l00320">psyclone.psyGen.PSy.name()</a>, <a class="el" href="parse_8py_source.html#l00448">psyclone.parse.KernelProcedure.name()</a>, <a class="el" href="parse_8py_source.html#l00628">psyclone.parse.KernelType.name()</a>, <a class="el" href="psyGen_8py_source.html#l00643">psyclone.psyGen.Invoke.name()</a>, <a class="el" href="parse_8py_source.html#l00920">psyclone.parse.InvokeCall.name()</a>, <a class="el" href="parse_8py_source.html#l00936">psyclone.parse.FileInfo.name()</a>, <a class="el" href="dynamo0p3_8py_source.html#l01337">psyclone.dynamo0p3.DynamoPSy.name()</a>, <a class="el" href="gocean1p0_8py_source.html#l01387">psyclone.gocean1p0.GOKernelGridArgument.name()</a>, <a class="el" href="gocean1p0_8py_source.html#l01609">psyclone.gocean1p0.GOStencil.name()</a>, <a class="el" href="psyGen_8py_source.html#l03570">psyclone.psyGen.Kern.name</a>, <a class="el" href="psyGen_8py_source.html#l00655">psyclone.psyGen.Invoke.psy_unique_var_names()</a>, <a class="el" href="psyGen_8py_source.html#l00651">psyclone.psyGen.Invoke.psy_unique_vars()</a>, <a class="el" href="psyGen_8py_source.html#l00705">psyclone.psyGen.Invoke.unique_declns_by_intent()</a>, <a class="el" href="dynamo0p3_8py_source.html#l03024">psyclone.dynamo0p3.DynInvoke.unique_fss()</a>, and <a class="el" href="dynamo0p3_8py_source.html#l02988">psyclone.dynamo0p3.DynInvoke.unique_proxy_declarations()</a>.</p>
<div class="fragment"><div class="line"><a name="l03066"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8ec1949a5d9f3852e2f5d65fe344cdc7"> 3066</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8ec1949a5d9f3852e2f5d65fe344cdc7">gen_code</a>(self, parent):</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="stringliteral">        Generates Dynamo specific invocation code (the subroutine</span></div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="stringliteral">        called by the associated invoke call in the algorithm</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="stringliteral">        layer). This consists of the PSy invocation subroutine and the</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="stringliteral">        declaration of its arguments.</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="stringliteral">        :param parent: The parent node in the AST (of the code to be \</span></div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="stringliteral">                       generated) to which the node describing the PSy \</span></div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="stringliteral">                       subroutine will be added</span></div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;<span class="stringliteral">        :type parent: :py:class:`psyclone.f2pygen.ModuleGen`</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <span class="keyword">from</span> <a class="code" href="namespacepsyclone_1_1f2pygen.html">psyclone.f2pygen</a> <span class="keyword">import</span> SubroutineGen, TypeDeclGen, AssignGen, \</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;            DeclGen, CommentGen</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        <span class="comment"># Does this Invoke contain only kernels that iterate over dofs?</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        dofs_only = self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080">iterate_over_dofs_only</a></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <span class="comment"># Create a namespace manager so we can avoid name clashes</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;        self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a5049d82b2420303e6a4207b5f15b5413">_name_space_manager</a> = NameSpaceFactory().create()</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="comment"># Create the subroutine</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        invoke_sub = SubroutineGen(parent, name=self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#ab6699fa93b458cffc4fa3874e0de2e1b">name</a>,</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                                   args=self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a7e09c41cafa5d17214833dc23aec52cf">psy_unique_var_names</a> +</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;                                   self.stencil.unique_alg_vars +</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;                                   self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a88f97e25ac522f7a8e084c7f278df82b">_psy_unique_qr_vars</a>)</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <span class="comment"># Add the subroutine argument declarations for real scalars</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        scalar_args = self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a>(<span class="stringliteral">&quot;gh_real&quot;</span>)</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        <span class="keywordflow">for</span> intent <span class="keywordflow">in</span> FORTRAN_INTENT_NAMES:</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;            <span class="keywordflow">if</span> scalar_args[intent]:</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;real&quot;</span>,</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;                                       kind=<span class="stringliteral">&quot;r_def&quot;</span>,</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;                                       entity_decls=scalar_args[intent],</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                                       intent=intent))</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        <span class="comment"># Add the subroutine argument declarations for integer scalars</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        scalar_args = self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a>(<span class="stringliteral">&quot;gh_integer&quot;</span>)</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <span class="keywordflow">for</span> intent <span class="keywordflow">in</span> FORTRAN_INTENT_NAMES:</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;            <span class="keywordflow">if</span> scalar_args[intent]:</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;integer&quot;</span>,</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;                                       entity_decls=scalar_args[intent],</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;                                       intent=intent))</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        <span class="comment"># declare any stencil arguments</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        self.stencil.declare_unique_alg_vars(invoke_sub)</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        <span class="comment"># Declare any mesh objects (including those for inter-grid kernels)</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        self.meshes.declarations(invoke_sub)</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        <span class="comment"># Declare any dofmaps</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        self.dofmaps.declare_dofmaps(invoke_sub)</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="comment"># Declare any CMA operators and associated parameters</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        self.cma_ops.declare_cma_ops(invoke_sub)</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <span class="comment"># Declare any arrays required for boundary conditions</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        self.boundary_conditions.declarations(invoke_sub)</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;        <span class="comment"># Add the subroutine argument declarations for fields</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        fld_args = self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a>(<span class="stringliteral">&quot;gh_field&quot;</span>)</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <span class="keywordflow">for</span> intent <span class="keywordflow">in</span> FORTRAN_INTENT_NAMES:</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;            <span class="keywordflow">if</span> fld_args[intent]:</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;                <span class="keywordflow">if</span> intent == <span class="stringliteral">&quot;out&quot;</span>:</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                    <span class="comment"># The data part of a field might have intent(out) but</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                    <span class="comment"># in order to preserve the state of the whole derived-type</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;                    <span class="comment"># object it must be declared as inout.</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                    fort_intent = <span class="stringliteral">&quot;inout&quot;</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                    fort_intent = intent</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;                invoke_sub.add(TypeDeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;field_type&quot;</span>,</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;                                           entity_decls=fld_args[intent],</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                                           intent=fort_intent))</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        <span class="comment"># Add the subroutine argument declarations for operators that</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="comment"># are read or written (operators are always on discontinuous spaces</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="comment"># and therefore are never &#39;inc&#39;)</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        op_declarations_dict = self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a>(<span class="stringliteral">&quot;gh_operator&quot;</span>)</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        <span class="keywordflow">for</span> intent <span class="keywordflow">in</span> FORTRAN_INTENT_NAMES:</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <span class="keywordflow">if</span> op_declarations_dict[intent]:</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                <span class="keywordflow">if</span> intent == <span class="stringliteral">&quot;out&quot;</span>:</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                    <span class="comment"># The data part of an operator might have intent(out) but</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                    <span class="comment"># in order to preserve the state of the whole derived-type</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                    <span class="comment"># object it must be declared as inout.</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                    fort_intent = <span class="stringliteral">&quot;inout&quot;</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                    fort_intent = intent</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                invoke_sub.add(</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                    TypeDeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;operator_type&quot;</span>,</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                                entity_decls=op_declarations_dict[intent],</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                                intent=fort_intent))</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        <span class="comment"># Add subroutine argument declarations for CMA operators that are</span></div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        <span class="comment"># read or written (as with normal/LMA operators, they are never &#39;inc&#39;</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <span class="comment"># because they are discontinuous)</span></div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        cma_op_declarations_dict = self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">unique_declns_by_intent</a>(</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <span class="stringliteral">&quot;gh_columnwise_operator&quot;</span>)</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        <span class="keywordflow">for</span> intent <span class="keywordflow">in</span> FORTRAN_INTENT_NAMES:</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            <span class="keywordflow">if</span> cma_op_declarations_dict[intent]:</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                <span class="keywordflow">if</span> intent == <span class="stringliteral">&quot;out&quot;</span>:</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;                    <span class="comment"># The data part of an operator might have intent(out) but</span></div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;                    <span class="comment"># in order to preserve the state of the whole derived-type</span></div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                    <span class="comment"># object it must be declared as inout.</span></div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;                    fort_intent = <span class="stringliteral">&quot;inout&quot;</span></div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;                    fort_intent = intent</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                invoke_sub.add(</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                    TypeDeclGen(invoke_sub,</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                                datatype=<span class="stringliteral">&quot;columnwise_operator_type&quot;</span>,</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                                entity_decls=cma_op_declarations_dict[intent],</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                                intent=fort_intent))</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        <span class="comment"># Add the subroutine argument declarations for qr (quadrature</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <span class="comment"># rules)</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        self.evaluators.declare_qr(invoke_sub)</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;        <span class="comment"># declare and initialise proxies for each of the (non-scalar)</span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        <span class="comment"># arguments</span></div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        invoke_sub.add(CommentGen(invoke_sub,</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                                  <span class="stringliteral">&quot; Initialise field and/or operator proxies&quot;</span>))</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b">psy_unique_vars</a>:</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            <span class="comment"># We don&#39;t have proxies for scalars</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            <span class="keywordflow">if</span> arg.type <span class="keywordflow">in</span> VALID_SCALAR_NAMES:</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            <span class="keywordflow">if</span> arg.vector_size &gt; 1:</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                <span class="comment"># the range function below returns values from</span></div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                <span class="comment"># 1 to the vector size which is what we</span></div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                <span class="comment"># require in our Fortran code</span></div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> range(1, arg.vector_size+1):</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                    invoke_sub.add(</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                        AssignGen(invoke_sub,</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;                                  lhs=arg.proxy_name+<span class="stringliteral">&quot;(&quot;</span>+str(idx)+<span class="stringliteral">&quot;)&quot;</span>,</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                                  rhs=arg.name+<span class="stringliteral">&quot;(&quot;</span>+str(idx)+<span class="stringliteral">&quot;)%get_proxy()&quot;</span>))</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                invoke_sub.add(AssignGen(invoke_sub, lhs=arg.proxy_name,</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                                         rhs=arg.name+<span class="stringliteral">&quot;%get_proxy()&quot;</span>))</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;        field_proxy_decs = self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">unique_proxy_declarations</a>(<span class="stringliteral">&quot;gh_field&quot;</span>)</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        <span class="keywordflow">if</span> len(field_proxy_decs) &gt; 0:</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;            invoke_sub.add(</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                TypeDeclGen(invoke_sub,</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                            datatype=<span class="stringliteral">&quot;field_proxy_type&quot;</span>,</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                            entity_decls=field_proxy_decs))</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        op_proxy_decs = self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">unique_proxy_declarations</a>(<span class="stringliteral">&quot;gh_operator&quot;</span>)</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        <span class="keywordflow">if</span> len(op_proxy_decs) &gt; 0:</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            invoke_sub.add(</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                TypeDeclGen(invoke_sub,</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                            datatype=<span class="stringliteral">&quot;operator_proxy_type&quot;</span>,</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                            entity_decls=op_proxy_decs))</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;        cma_op_proxy_decs = self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">unique_proxy_declarations</a>(</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <span class="stringliteral">&quot;gh_columnwise_operator&quot;</span>)</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="keywordflow">if</span> cma_op_proxy_decs:</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            invoke_sub.add(</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                TypeDeclGen(invoke_sub,</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                            datatype=<span class="stringliteral">&quot;columnwise_operator_proxy_type&quot;</span>,</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                            entity_decls=cma_op_proxy_decs))</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <span class="comment"># Initialise the number of layers (if we are calling one or more</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        <span class="comment"># kernels that iterate over cells)</span></div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> dofs_only:</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            invoke_sub.add(CommentGen(invoke_sub,</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                                      <span class="stringliteral">&quot; Initialise number of layers&quot;</span>))</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;        <span class="comment"># Find the first argument that is not a scalar. Also, if there</span></div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <span class="comment"># any CMA operators as arguments then keep a reference to one</span></div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        <span class="comment"># of them so that we can look-up the number of columns in the</span></div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        <span class="comment"># mesh using its proxy</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        first_var = <span class="keywordtype">None</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        cma_op = <span class="keywordtype">None</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        <span class="keywordflow">for</span> var <span class="keywordflow">in</span> self.<a class="code" href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b">psy_unique_vars</a>:</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> first_var <span class="keywordflow">and</span> var.type <span class="keywordflow">not</span> <span class="keywordflow">in</span> VALID_SCALAR_NAMES:</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                first_var = var</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;            <span class="keywordflow">if</span> var.type == <span class="stringliteral">&quot;gh_columnwise_operator&quot;</span>:</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                cma_op = var</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> first_var:</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;            <span class="keywordflow">raise</span> GenerationError(</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                <span class="stringliteral">&quot;Cannot create an Invoke with no field/operator arguments&quot;</span>)</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="comment"># We only need the number of layers in the mesh if we are calling</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        <span class="comment"># one or more kernels that iterate over cells</span></div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> dofs_only:</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;            <span class="comment"># Use our namespace manager to create a unique name unless</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <span class="comment"># the context and label match and in this case return the</span></div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <span class="comment"># previous name</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            nlayers_name = self._name_space_manager.create_name(</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                root_name=<span class="stringliteral">&quot;nlayers&quot;</span>, context=<span class="stringliteral">&quot;PSyVars&quot;</span>, label=<span class="stringliteral">&quot;nlayers&quot;</span>)</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;            invoke_sub.add(</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                AssignGen(invoke_sub, lhs=nlayers_name,</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;                          rhs=first_var.proxy_name_indexed + <span class="stringliteral">&quot;%&quot;</span> +</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;                          first_var.ref_name() + <span class="stringliteral">&quot;%get_nlayers()&quot;</span>))</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;            invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;integer&quot;</span>,</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;                                   entity_decls=[nlayers_name]))</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        <span class="comment"># Initialise mesh object(s) and all related quantities for any</span></div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        <span class="comment"># inter-grid kernels (number of fine cells per coarse cell etc.)</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        self.meshes.initialise(invoke_sub)</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;        <span class="comment"># If we have one or more CMA operators then we will need the number</span></div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <span class="comment"># of columns in the mesh</span></div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;        <span class="keywordflow">if</span> cma_op:</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            invoke_sub.add(CommentGen(invoke_sub,</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;                                      <span class="stringliteral">&quot; Initialise number of cols&quot;</span>))</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;            ncol_name = self._name_space_manager.create_name(</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;                root_name=<span class="stringliteral">&quot;ncell_2d&quot;</span>, context=<span class="stringliteral">&quot;PSyVars&quot;</span>, label=<span class="stringliteral">&quot;ncell_2d&quot;</span>)</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;            invoke_sub.add(</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;                AssignGen(invoke_sub, lhs=ncol_name,</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;                          rhs=cma_op.proxy_name_indexed + <span class="stringliteral">&quot;%ncell_2d&quot;</span>))</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;integer&quot;</span>,</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;                                   entity_decls=[ncol_name]))</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        <span class="keywordflow">if</span> self.schedule.reductions(reprod=<span class="keyword">True</span>):</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;            <span class="comment"># we have at least one reproducible reduction so we need</span></div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;            <span class="comment"># to know the number of OpenMP threads</span></div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;            <span class="keyword">from</span> <a class="code" href="namespacepsyclone_1_1f2pygen.html">psyclone.f2pygen</a> <span class="keyword">import</span> UseGen</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;            omp_function_name = <span class="stringliteral">&quot;omp_get_max_threads&quot;</span></div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            nthreads_name = self._name_space_manager.create_name(</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;                root_name=<span class="stringliteral">&quot;nthreads&quot;</span>, context=<span class="stringliteral">&quot;PSyVars&quot;</span>, label=<span class="stringliteral">&quot;nthreads&quot;</span>)</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            invoke_sub.add(UseGen(invoke_sub, name=<span class="stringliteral">&quot;omp_lib&quot;</span>, only=<span class="keyword">True</span>,</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;                                  funcnames=[omp_function_name]))</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;            invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;integer&quot;</span>,</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;                                   entity_decls=[nthreads_name]))</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;            invoke_sub.add(CommentGen(</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;                invoke_sub, <span class="stringliteral">&quot; Determine the number of OpenMP threads&quot;</span>))</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;            invoke_sub.add(AssignGen(invoke_sub, lhs=nthreads_name,</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;                                     rhs=omp_function_name+<span class="stringliteral">&quot;()&quot;</span>))</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        <span class="comment"># Initialise any stencil maps</span></div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        self.stencil.initialise_stencil_maps(invoke_sub)</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        <span class="comment"># Initialise dofmaps (one for each function space that is used</span></div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="comment"># in this invoke)</span></div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        self.dofmaps.initialise_dofmaps(invoke_sub)</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="comment"># Initialise CMA operators and associated parameters</span></div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        self.cma_ops.initialise_cma_ops(invoke_sub)</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        <span class="comment"># Initialise any boundary-condition arrays</span></div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        self.boundary_conditions.initialise(invoke_sub)</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;        var_list = []</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        <span class="comment"># loop over all unique function spaces used by the kernels in</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        <span class="comment"># this invoke</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <span class="keywordflow">for</span> function_space <span class="keywordflow">in</span> self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34">unique_fss</a>():</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;            <span class="comment"># Initialise information associated with this function space.</span></div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            <span class="comment"># If we have 1+ kernels that iterate over cells then we</span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;            <span class="comment"># will need ndf and undf. If we don&#39;t then we only need undf</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;            <span class="comment"># (for the upper bound of the loop over dofs) if we&#39;re not</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;            <span class="comment"># doing DM.</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (dofs_only <span class="keywordflow">and</span> Config.get().distributed_memory):</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;                invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                invoke_sub.add(</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;                    CommentGen(invoke_sub, <span class="stringliteral">&quot; Initialise number of DoFs for &quot;</span> +</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                               function_space.mangled_name))</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;                invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;            <span class="comment"># Find an argument on this space to use to dereference</span></div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;            arg = self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892">arg_for_funcspace</a>(function_space)</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;            name = arg.proxy_name_indexed</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;            <span class="comment"># Initialise ndf for this function space and add name to</span></div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;            <span class="comment"># list to declare later.</span></div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> dofs_only:</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                ndf_name = get_fs_ndf_name(function_space)</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                var_list.append(ndf_name)</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;                invoke_sub.add(AssignGen(invoke_sub, lhs=ndf_name,</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;                                         rhs=name +</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                                         <span class="stringliteral">&quot;%&quot;</span> + arg.ref_name(function_space) +</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                                         <span class="stringliteral">&quot;%get_ndf()&quot;</span>))</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;            <span class="comment"># If there is a field on this space then initialise undf</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            <span class="comment"># for this function space and add name to list to declare</span></div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;            <span class="comment"># later. However, if the invoke contains only kernels that iterate</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;            <span class="comment"># over dofs and distributed memory is enabled then the</span></div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;            <span class="comment"># number of dofs is obtained from the field proxy and undf is</span></div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            <span class="comment"># not required.</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (dofs_only <span class="keywordflow">and</span> Config.get().distributed_memory):</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                <span class="keywordflow">if</span> self.<a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">field_on_space</a>(function_space):</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                    undf_name = get_fs_undf_name(function_space)</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                    var_list.append(undf_name)</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                    invoke_sub.add(AssignGen(invoke_sub, lhs=undf_name,</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                                             rhs=name + <span class="stringliteral">&quot;%&quot;</span> +</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                                             arg.ref_name(function_space) +</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                                             <span class="stringliteral">&quot;%get_undf()&quot;</span>))</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;        <span class="keywordflow">if</span> var_list:</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            <span class="comment"># declare ndf and undf for all function spaces</span></div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            invoke_sub.add(DeclGen(invoke_sub, datatype=<span class="stringliteral">&quot;integer&quot;</span>,</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                                   entity_decls=var_list))</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <span class="comment"># Initialise basis and/or differential-basis functions</span></div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        self.evaluators.initialise_basis_fns(invoke_sub)</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;        <span class="comment"># add calls to compute the values of any basis arrays</span></div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        self.evaluators.compute_basis_fns(invoke_sub)</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        <span class="keywordflow">if</span> Config.get().distributed_memory:</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot; Call kernels and &quot;</span></div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                                      <span class="stringliteral">&quot;communication routines&quot;</span>))</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;            invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot; Call our kernels&quot;</span>))</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <span class="comment"># add content from the schedule</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        self.schedule.gen_code(invoke_sub)</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        <span class="comment"># Deallocate any basis arrays</span></div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        self.evaluators.deallocate(invoke_sub)</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        invoke_sub.add(CommentGen(invoke_sub, <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        <span class="comment"># finally, add me to my parent</span></div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        parent.add(invoke_sub)</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a8ec1949a5d9f3852e2f5d65fe344cdc7"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8ec1949a5d9f3852e2f5d65fe344cdc7">psyclone.dynamo0p3.DynInvoke.gen_code</a></div><div class="ttdeci">def gen_code(self, parent)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03066">dynamo0p3.py:3066</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_a1ec704a73a35f61a2afa53950fc4a66b"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b">psyclone.psyGen.Invoke.psy_unique_vars</a></div><div class="ttdeci">def psy_unique_vars(self)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00651">psyGen.py:651</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a519fa7f3c8ff4eeee92d13289a3d613a"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a">psyclone.dynamo0p3.DynInvoke.field_on_space</a></div><div class="ttdeci">def field_on_space(self, func_space)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03057">dynamo0p3.py:3057</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a88f97e25ac522f7a8e084c7f278df82b"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a88f97e25ac522f7a8e084c7f278df82b">psyclone.dynamo0p3.DynInvoke._psy_unique_qr_vars</a></div><div class="ttdeci">_psy_unique_qr_vars</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02959">dynamo0p3.py:2959</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a5049d82b2420303e6a4207b5f15b5413"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a5049d82b2420303e6a4207b5f15b5413">psyclone.dynamo0p3.DynInvoke._name_space_manager</a></div><div class="ttdeci">_name_space_manager</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03083">dynamo0p3.py:3083</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_a7e09c41cafa5d17214833dc23aec52cf"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#a7e09c41cafa5d17214833dc23aec52cf">psyclone.psyGen.Invoke.psy_unique_var_names</a></div><div class="ttdeci">def psy_unique_var_names(self)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00655">psyGen.py:655</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_ab6699fa93b458cffc4fa3874e0de2e1b"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#ab6699fa93b458cffc4fa3874e0de2e1b">psyclone.psyGen.Invoke.name</a></div><div class="ttdeci">def name(self)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00643">psyGen.py:643</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a8e69798a97d7a7e659386a8e6b932080"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080">psyclone.dynamo0p3.DynInvoke.iterate_over_dofs_only</a></div><div class="ttdeci">def iterate_over_dofs_only(self)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03046">dynamo0p3.py:3046</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ae9c00f3b2e12152ef697bd6c70e89f80"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">psyclone.dynamo0p3.DynInvoke.unique_proxy_declarations</a></div><div class="ttdeci">def unique_proxy_declarations(self, datatype, access=None)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02988">dynamo0p3.py:2988</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a4319b398ff9289af1927513ffb4dd892"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892">psyclone.dynamo0p3.DynInvoke.arg_for_funcspace</a></div><div class="ttdeci">def arg_for_funcspace(self, fspace)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03011">dynamo0p3.py:3011</a></div></div>
<div class="ttc" id="classpsyclone_1_1psyGen_1_1Invoke_html_a21a4142f2b3d5beac3fbc6ee49a18811"><div class="ttname"><a href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811">psyclone.psyGen.Invoke.unique_declns_by_intent</a></div><div class="ttdeci">def unique_declns_by_intent(self, datatype)</div><div class="ttdef"><b>Definition:</b> <a href="psyGen_8py_source.html#l00705">psyGen.py:705</a></div></div>
<div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ad7c703b366986387918a888c33f37d34"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34">psyclone.dynamo0p3.DynInvoke.unique_fss</a></div><div class="ttdeci">def unique_fss(self)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03024">dynamo0p3.py:3024</a></div></div>
<div class="ttc" id="namespacepsyclone_1_1f2pygen_html"><div class="ttname"><a href="namespacepsyclone_1_1f2pygen.html">psyclone.f2pygen</a></div><div class="ttdef"><b>Definition:</b> <a href="f2pygen_8py_source.html#l00001">f2pygen.py:1</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a8ec1949a5d9f3852e2f5d65fe344cdc7_cgraph.png" border="0" usemap="#classpsyclone_1_1dynamo0p3_1_1DynInvoke_a8ec1949a5d9f3852e2f5d65fe344cdc7_cgraph" alt=""/></div>
<map name="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a8ec1949a5d9f3852e2f5d65fe344cdc7_cgraph" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_a8ec1949a5d9f3852e2f5d65fe344cdc7_cgraph">
<area shape="rect" id="node2" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a4319b398ff9289af1927513ffb4dd892" title="psyclone.dynamo0p3.DynInvoke.arg\l_for_funcspace" alt="" coords="347,5,582,47"/>
<area shape="rect" id="node3" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a519fa7f3c8ff4eeee92d13289a3d613a" title="psyclone.dynamo0p3.DynInvoke.field\l_on_space" alt="" coords="345,71,585,112"/>
<area shape="rect" id="node4" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080" title="psyclone.dynamo0p3.DynInvoke.iterate\l_over_dofs_only" alt="" coords="339,136,591,177"/>
<area shape="rect" id="node5" href="classpsyclone_1_1expression_1_1NamedArg.html#ac4cb9d183a023788a9e5cb85a4899206" title="psyclone.expression.Named\lArg.name" alt="" coords="1002,557,1189,599"/>
<area shape="rect" id="node6" href="classpsyclone_1_1psyGen_1_1PSy.html#a37f45fcc08001b7910dbad5265805655" title="psyclone.psyGen.PSy.name" alt="" coords="1001,623,1189,650"/>
<area shape="rect" id="node7" href="classpsyclone_1_1parse_1_1KernelProcedure.html#a8c0311b352ec24eb070e5011ca0a381c" title="psyclone.parse.KernelProcedure.name" alt="" coords="972,674,1219,701"/>
<area shape="rect" id="node8" href="classpsyclone_1_1parse_1_1KernelType.html#aae575d92f86e6ec52cea59d3861641d4" title="psyclone.parse.KernelType.name" alt="" coords="987,725,1203,751"/>
<area shape="rect" id="node9" href="classpsyclone_1_1psyGen_1_1Invoke.html#ab6699fa93b458cffc4fa3874e0de2e1b" title="psyclone.psyGen.Invoke.name" alt="" coords="994,775,1197,802"/>
<area shape="rect" id="node10" href="classpsyclone_1_1parse_1_1InvokeCall.html#af84d250c83359ef22f462ebebb14bda1" title="psyclone.parse.InvokeCall.name" alt="" coords="989,826,1201,853"/>
<area shape="rect" id="node11" href="classpsyclone_1_1parse_1_1FileInfo.html#aa6ece28a0fa90fd87f88e40671f500f0" title="psyclone.parse.FileInfo.name" alt="" coords="999,1709,1192,1735"/>
<area shape="rect" id="node12" href="classpsyclone_1_1dynamo0p3_1_1DynamoPSy.html#a141020148f72afddde684416b8dde610" title="psyclone.dynamo0p3.Dynamo\lPSy.name" alt="" coords="996,1760,1195,1801"/>
<area shape="rect" id="node13" href="classpsyclone_1_1gocean1p0_1_1GOKernelGridArgument.html#afa1becc18e248912b340da32ae64e299" title="psyclone.gocean1p0.GOKernel\lGridArgument.name" alt="" coords="994,2863,1197,2904"/>
<area shape="rect" id="node14" href="classpsyclone_1_1gocean1p0_1_1GOStencil.html#a800748aca0ce297d84e04a80e6e6c25e" title="psyclone.gocean1p0.GOStencil.name" alt="" coords="975,2971,1216,2998"/>
<area shape="rect" id="node16" href="classpsyclone_1_1psyGen_1_1Invoke.html#a7e09c41cafa5d17214833dc23aec52cf" title="psyclone.psyGen.Invoke.psy\l_unique_var_names" alt="" coords="1000,3095,1191,3136"/>
<area shape="rect" id="node17" href="classpsyclone_1_1psyGen_1_1Invoke.html#a1ec704a73a35f61a2afa53950fc4a66b" title="psyclone.psyGen.Invoke.psy\l_unique_vars" alt="" coords="693,507,883,548"/>
<area shape="rect" id="node18" href="classpsyclone_1_1psyGen_1_1Invoke.html#a21a4142f2b3d5beac3fbc6ee49a18811" title="psyclone.psyGen.Invoke.unique\l_declns_by_intent" alt="" coords="361,1655,569,1696"/>
<area shape="rect" id="node49" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34" title="psyclone.dynamo0p3.DynInvoke.unique_fss" alt="" coords="325,3225,604,3251"/>
<area shape="rect" id="node50" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80" title="psyclone.dynamo0p3.DynInvoke.unique\l_proxy_declarations" alt="" coords="337,3276,592,3317"/>
<area shape="rect" id="node15" href="classpsyclone_1_1gocean1p0_1_1GOStencil.html#a5811b0a9523e45040bd56ec00a452733" title="psyclone.gocean1p0.GOStencil.\l_check_init" alt="" coords="1267,2964,1476,3005"/>
<area shape="rect" id="node19" href="classpsyclone_1_1psyGen_1_1Invoke.html#aa78c95a6c82d422cb2a6def5c936076c" title="psyclone.psyGen.Invoke.unique\l_declarations" alt="" coords="684,1815,892,1856"/>
<area shape="rect" id="node20" href="classpsyclone_1_1psyGen_1_1Invoke.html#abfab1a86fcdebaae406efa3c96696713" title="psyclone.psyGen.Invoke.first\l_access" alt="" coords="692,1880,884,1921"/>
<area shape="rect" id="node21" href="classpsyclone_1_1dynamo0p1_1_1DynInvoke.html#ad2bc413a9111ddfb8b3a8295449db1f0" title="psyclone.dynamo0p1.DynInvoke.gen_code" alt="" coords="652,826,924,853"/>
<area shape="rect" id="node22" href="classpsyclone_1_1dynamo0p1_1_1DynLoop.html#ac69b31c0de3d4e4196107e2c969a9159" title="psyclone.dynamo0p1.DynLoop.gen_code" alt="" coords="657,1946,919,1973"/>
<area shape="rect" id="node23" href="classpsyclone_1_1dynamo0p1_1_1DynKern.html#a4e284b1c9ec5dc663673f20fdb475a80" title="psyclone.dynamo0p1.DynKern.gen_code" alt="" coords="658,1997,918,2023"/>
<area shape="rect" id="node24" href="classpsyclone_1_1dynamo0p3_1_1DynGlobalSum.html#ab850352ac5a8b53740d2f9ebb7c3f82f" title="psyclone.dynamo0p3.DynGlobal\lSum.gen_code" alt="" coords="683,2048,893,2089"/>
<area shape="rect" id="node25" href="classpsyclone_1_1dynamo0p3_1_1DynHaloExchange.html#ae6f375e975078097400e91c61c82cecf" title="psyclone.dynamo0p3.DynHalo\lExchange.gen_code" alt="" coords="688,2113,888,2155"/>
<area shape="rect" id="node26" href="classpsyclone_1_1dynamo0p3_1_1DynLoop.html#a056323df2353170d6e33f795eb15d0a2" title="psyclone.dynamo0p3.DynLoop.gen_code" alt="" coords="657,2179,919,2206"/>
<area shape="rect" id="node27" href="classpsyclone_1_1dynamo0p3_1_1DynKern.html#aed208ff1a80ee1d5e6006540f91b1549" title="psyclone.dynamo0p3.DynKern.gen_code" alt="" coords="658,2230,918,2257"/>
<area shape="rect" id="node28" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynBuiltIn.html#a418d0c5dbc264d538ebd2bf4fdeb768f" title="psyclone.dynamo0p3\l_builtins.DynBuiltIn.gen_code" alt="" coords="691,2281,885,2323"/>
<area shape="rect" id="node29" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynXPlusYKern.html#ad004bc08f0a3b19db91c98deaf772047" title="psyclone.dynamo0p3\l_builtins.DynXPlusYKern.gen_code" alt="" coords="673,2347,903,2388"/>
<area shape="rect" id="node30" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXPlusYKern.html#a553186a942e0fade9955fb7222b8779a" title="psyclone.dynamo0p3\l_builtins.DynIncXPlusYKern.gen_code" alt="" coords="665,2412,911,2453"/>
<area shape="rect" id="node31" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynAXPlusYKern.html#a1d30c98ce1b5fe4ec5986568e5083022" title="psyclone.dynamo0p3\l_builtins.DynAXPlusYKern.gen_code" alt="" coords="669,2477,907,2519"/>
<area shape="rect" id="node32" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncAXPlusYKern.html#a1b0a3eaa124168b961bd721a4c53da14" title="psyclone.dynamo0p3\l_builtins.DynIncAXPlusYKern.gen_code" alt="" coords="660,2543,916,2584"/>
<area shape="rect" id="node33" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXPlusBYKern.html#a2473370d992ec4b244ef76615d574b8e" title="psyclone.dynamo0p3\l_builtins.DynIncXPlusBYKern.gen_code" alt="" coords="660,2608,916,2649"/>
<area shape="rect" id="node34" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynAXPlusBYKern.html#a03f0f82624f54d952de66f582ac9d674" title="psyclone.dynamo0p3\l_builtins.DynAXPlusBYKern.gen_code" alt="" coords="665,2673,911,2715"/>
<area shape="rect" id="node35" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncAXPlusBYKern.html#a892a895fee4fb993e403c3ba2b8a192d" title="psyclone.dynamo0p3\l_builtins.DynIncAXPlusBYKern.gen_code" alt="" coords="655,2739,921,2780"/>
<area shape="rect" id="node36" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynXMinusYKern.html#a59d49f98e0aab56ee3fb9f0b3a986cf2" title="psyclone.dynamo0p3\l_builtins.DynXMinusYKern.gen_code" alt="" coords="669,2804,907,2845"/>
<area shape="rect" id="node37" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXMinusYKern.html#abe19075a900d47b9d6beafdc2469d143" title="psyclone.dynamo0p3\l_builtins.DynIncXMinusYKern.gen_code" alt="" coords="660,877,916,919"/>
<area shape="rect" id="node38" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynAXMinusYKern.html#a59cfa4b77ae0851312dcbd59cb2de92b" title="psyclone.dynamo0p3\l_builtins.DynAXMinusYKern.gen_code" alt="" coords="665,943,911,984"/>
<area shape="rect" id="node39" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynXMinusBYKern.html#a710fa42ae1e10ad941c2f37db9fb712d" title="psyclone.dynamo0p3\l_builtins.DynXMinusBYKern.gen_code" alt="" coords="665,1008,911,1049"/>
<area shape="rect" id="node40" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXMinusBYKern.html#a5903e8205df6bddc9de154ea18fde5b7" title="psyclone.dynamo0p3\l_builtins.DynIncXMinusBYKern.gen_code" alt="" coords="655,1073,921,1115"/>
<area shape="rect" id="node41" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynXTimesYKern.html#aed193a60ed974addd71ed404787ca2d4" title="psyclone.dynamo0p3\l_builtins.DynXTimesYKern.gen_code" alt="" coords="669,1139,907,1180"/>
<area shape="rect" id="node42" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXTimesYKern.html#a005e8eb6d81492b3bda314fa62d3f546" title="psyclone.dynamo0p3\l_builtins.DynIncXTimesYKern.gen_code" alt="" coords="659,1204,917,1245"/>
<area shape="rect" id="node43" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncAXTimesYKern.html#a1eb3bded71af857a32e6a166a61faee6" title="psyclone.dynamo0p3\l_builtins.DynIncAXTimesYKern.gen_code" alt="" coords="655,1269,921,1311"/>
<area shape="rect" id="node44" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynATimesXKern.html#abf3976218bac2f8715184317811e92c3" title="psyclone.dynamo0p3\l_builtins.DynATimesXKern.gen_code" alt="" coords="669,1335,907,1376"/>
<area shape="rect" id="node45" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncATimesXKern.html#a5de137ad7fa03c1726ad3f63c14025d6" title="psyclone.dynamo0p3\l_builtins.DynIncATimesXKern.gen_code" alt="" coords="659,1400,917,1441"/>
<area shape="rect" id="node46" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynXDividebyYKern.html#a7fe75324908d303091cc8b1841ed7531" title="psyclone.dynamo0p3\l_builtins.DynXDividebyYKern.gen_code" alt="" coords="661,1465,915,1507"/>
<area shape="rect" id="node47" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXDividebyYKern.html#a7b5641668d084991fa7ddd3ab739e481" title="psyclone.dynamo0p3\l_builtins.DynIncXDividebyYKern.gen_code" alt="" coords="652,1531,924,1572"/>
<area shape="rect" id="node48" href="classpsyclone_1_1dynamo0p3__builtins_1_1DynIncXPowrealAKern.html#a97bbebcea4cfc3828b6c9429ce6d343e" title="psyclone.dynamo0p3\l_builtins.DynIncXPowrealAKern.gen_code" alt="" coords="654,1596,922,1637"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a75572ca91c2786ed836e6657b2cec4b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.is_coloured </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns true if at least one of the loops in the
schedule of this invoke has been coloured </pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03037">3037</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l03037"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a75572ca91c2786ed836e6657b2cec4b8"> 3037</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a75572ca91c2786ed836e6657b2cec4b8">is_coloured</a>(self):</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns true if at least one of the loops in the</span></div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;<span class="stringliteral">        schedule of this invoke has been coloured &#39;&#39;&#39;</span></div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;        <span class="keywordflow">for</span> loop <span class="keywordflow">in</span> self.schedule.loops():</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;            <span class="keywordflow">if</span> loop.loop_type == <span class="stringliteral">&quot;colours&quot;</span>:</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span></div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a75572ca91c2786ed836e6657b2cec4b8"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a75572ca91c2786ed836e6657b2cec4b8">psyclone.dynamo0p3.DynInvoke.is_coloured</a></div><div class="ttdeci">def is_coloured(self)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03037">dynamo0p3.py:3037</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e69798a97d7a7e659386a8e6b932080"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.iterate_over_dofs_only </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">:returns: whether or not this Invoke consists only of kernels that \
  iterate over DoFs.
:rtype: bool
</pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03046">3046</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l03046"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080"> 3046</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080">iterate_over_dofs_only</a>(self):</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="stringliteral">        :returns: whether or not this Invoke consists only of kernels that \</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="stringliteral">                  iterate over DoFs.</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;<span class="stringliteral">        :rtype: bool</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        <span class="keywordflow">for</span> kern_call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;            <span class="keywordflow">if</span> kern_call.iterates_over.lower() != <span class="stringliteral">&quot;dofs&quot;</span>:</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">True</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_a8e69798a97d7a7e659386a8e6b932080"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#a8e69798a97d7a7e659386a8e6b932080">psyclone.dynamo0p3.DynInvoke.iterate_over_dofs_only</a></div><div class="ttdeci">def iterate_over_dofs_only(self)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03046">dynamo0p3.py:3046</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad7c703b366986387918a888c33f37d34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.unique_fss </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the unique function space *objects* over all kernel
calls in this invoke. </pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l03024">3024</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l03024"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34"> 3024</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34">unique_fss</a>(self):</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns the unique function space *objects* over all kernel</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="stringliteral">        calls in this invoke. &#39;&#39;&#39;</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;        unique_fs = []</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;        unique_fs_names = []</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        <span class="keywordflow">for</span> kern_call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            kern_fss = kern_call.arguments.unique_fss</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <span class="keywordflow">for</span> fspace <span class="keywordflow">in</span> kern_fss:</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                <span class="keywordflow">if</span> fspace.mangled_name <span class="keywordflow">not</span> <span class="keywordflow">in</span> unique_fs_names:</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                    unique_fs.append(fspace)</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                    unique_fs_names.append(fspace.mangled_name)</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        <span class="keywordflow">return</span> unique_fs</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ad7c703b366986387918a888c33f37d34"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ad7c703b366986387918a888c33f37d34">psyclone.dynamo0p3.DynInvoke.unique_fss</a></div><div class="ttdeci">def unique_fss(self)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l03024">dynamo0p3.py:3024</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae9c00f3b2e12152ef697bd6c70e89f80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.dynamo0p3.DynInvoke.unique_proxy_declarations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>access</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a list of all required proxy declarations for the
specified datatype.  If access is supplied (e.g. "gh_write")
then only declarations with that access are returned. </pre> 
<p>Definition at line <a class="el" href="dynamo0p3_8py_source.html#l02988">2988</a> of file <a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a>.</p>
<div class="fragment"><div class="line"><a name="l02988"></a><span class="lineno"><a class="line" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80"> 2988</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">unique_proxy_declarations</a>(self, datatype, access=None):</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns a list of all required proxy declarations for the</span></div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="stringliteral">        specified datatype.  If access is supplied (e.g. &quot;gh_write&quot;)</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="stringliteral">        then only declarations with that access are returned. &#39;&#39;&#39;</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        <span class="keywordflow">if</span> datatype <span class="keywordflow">not</span> <span class="keywordflow">in</span> VALID_ARG_TYPE_NAMES:</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            <span class="keywordflow">raise</span> GenerationError(</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;                <span class="stringliteral">&quot;unique_proxy_declarations called with an invalid datatype. &quot;</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;                <span class="stringliteral">&quot;Expected one of &#39;{0}&#39; but found &#39;{1}&#39;&quot;</span>.</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                format(str(VALID_ARG_TYPE_NAMES), datatype))</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="keywordflow">if</span> access <span class="keywordflow">and</span> access <span class="keywordflow">not</span> <span class="keywordflow">in</span> VALID_ACCESS_DESCRIPTOR_NAMES:</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;            <span class="keywordflow">raise</span> GenerationError(</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;                <span class="stringliteral">&quot;unique_proxy_declarations called with an invalid access &quot;</span></div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;                <span class="stringliteral">&quot;type. Expected one of &#39;{0}&#39; but got &#39;{1}&#39;&quot;</span>.</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                format(VALID_ACCESS_DESCRIPTOR_NAMES, access))</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        declarations = []</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <span class="keywordflow">for</span> call <span class="keywordflow">in</span> self.schedule.calls():</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> call.arguments.args:</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> access <span class="keywordflow">or</span> arg.access == access:</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;                    <span class="keywordflow">if</span> arg.text <span class="keywordflow">and</span> arg.type == datatype:</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;                        <span class="keywordflow">if</span> arg.proxy_declaration_name <span class="keywordflow">not</span> <span class="keywordflow">in</span> declarations:</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;                            declarations.append(arg.proxy_declaration_name)</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        <span class="keywordflow">return</span> declarations</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div><div class="ttc" id="classpsyclone_1_1dynamo0p3_1_1DynInvoke_html_ae9c00f3b2e12152ef697bd6c70e89f80"><div class="ttname"><a href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html#ae9c00f3b2e12152ef697bd6c70e89f80">psyclone.dynamo0p3.DynInvoke.unique_proxy_declarations</a></div><div class="ttdeci">def unique_proxy_declarations(self, datatype, access=None)</div><div class="ttdef"><b>Definition:</b> <a href="dynamo0p3_8py_source.html#l02988">dynamo0p3.py:2988</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/psyclone/<a class="el" href="dynamo0p3_8py_source.html">dynamo0p3.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>psyclone</b></li><li class="navelem"><b>dynamo0p3</b></li><li class="navelem"><a class="el" href="classpsyclone_1_1dynamo0p3_1_1DynInvoke.html">DynInvoke</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
