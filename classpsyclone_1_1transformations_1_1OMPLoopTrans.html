<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PSyclone: psyclone.transformations.OMPLoopTrans Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="psyclone_v1.0_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSyclone
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classpsyclone_1_1transformations_1_1OMPLoopTrans.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classpsyclone_1_1transformations_1_1OMPLoopTrans-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">psyclone.transformations.OMPLoopTrans Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for psyclone.transformations.OMPLoopTrans:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1transformations_1_1OMPLoopTrans__inherit__graph.png" border="0" usemap="#psyclone_8transformations_8OMPLoopTrans_inherit__map" alt="Inheritance graph"/></div>
<map name="psyclone_8transformations_8OMPLoopTrans_inherit__map" id="psyclone_8transformations_8OMPLoopTrans_inherit__map">
<area shape="rect" id="node5" href="classpsyclone_1_1transformations_1_1Dynamo0p3OMPLoopTrans.html" title="psyclone.transformations.\lDynamo0p3OMPLoopTrans" alt="" coords="813,5,996,47"/>
<area shape="rect" id="node6" href="classpsyclone_1_1transformations_1_1GOceanOMPLoopTrans.html" title="psyclone.transformations.\lGOceanOMPLoopTrans" alt="" coords="819,71,991,112"/>
<area shape="rect" id="node7" href="classpsyclone_1_1transformations_1_1OMPParallelLoopTrans.html" title="psyclone.transformations.\lOMPParallelLoopTrans" alt="" coords="819,136,991,177"/>
<area shape="rect" id="node2" href="classpsyclone_1_1transformations_1_1ParallelLoopTrans.html" title="psyclone.transformations.\lParallelLoopTrans" alt="" coords="373,71,545,112"/>
<area shape="rect" id="node3" href="classpsyclone_1_1psyGen_1_1Transformation.html" title="psyclone.psyGen.Transformation" alt="" coords="111,78,325,105"/>
<area shape="rect" id="node8" href="classpsyclone_1_1transformations_1_1DynamoOMPParallelLoopTrans.html" title="psyclone.transformations.\lDynamoOMPParallelLoopTrans" alt="" coords="1044,103,1249,144"/>
<area shape="rect" id="node9" href="classpsyclone_1_1transformations_1_1GOceanOMPParallelLoopTrans.html" title="psyclone.transformations.\lGOceanOMPParallelLoopTrans" alt="" coords="1045,168,1249,209"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for psyclone.transformations.OMPLoopTrans:</div>
<div class="dyncontent">
<div class="center"><img src="classpsyclone_1_1transformations_1_1OMPLoopTrans__coll__graph.png" border="0" usemap="#psyclone_8transformations_8OMPLoopTrans_coll__map" alt="Collaboration graph"/></div>
<map name="psyclone_8transformations_8OMPLoopTrans_coll__map" id="psyclone_8transformations_8OMPLoopTrans_coll__map">
<area shape="rect" id="node2" href="classpsyclone_1_1transformations_1_1ParallelLoopTrans.html" title="psyclone.transformations.\lParallelLoopTrans" alt="" coords="27,155,199,196"/>
<area shape="rect" id="node3" href="classpsyclone_1_1psyGen_1_1Transformation.html" title="psyclone.psyGen.Transformation" alt="" coords="5,80,220,107"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9975df3efeb85b625b92597d79636efd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9975df3efeb85b625b92597d79636efd"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, omp_schedule=&quot;static&quot;)</td></tr>
<tr class="separator:a9975df3efeb85b625b92597d79636efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46735bd29d98be77579de3692c137e7b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46735bd29d98be77579de3692c137e7b"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__str__</b> (self)</td></tr>
<tr class="separator:a46735bd29d98be77579de3692c137e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219145cd3d848ae21ebfb0b09db0c66d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a219145cd3d848ae21ebfb0b09db0c66d">name</a> (self)</td></tr>
<tr class="separator:a219145cd3d848ae21ebfb0b09db0c66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fed4d23b64453bc29ce9387004d874"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a47fed4d23b64453bc29ce9387004d874">omp_schedule</a> (self)</td></tr>
<tr class="separator:a47fed4d23b64453bc29ce9387004d874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f67597c60a122c6669e80a8a7a1bdd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a67f67597c60a122c6669e80a8a7a1bdd">omp_schedule</a> (self, value)</td></tr>
<tr class="separator:a67f67597c60a122c6669e80a8a7a1bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29be2b9c377e6efd78536137a48d78ad"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a29be2b9c377e6efd78536137a48d78ad">apply</a> (self, node, reprod=None)</td></tr>
<tr class="separator:a29be2b9c377e6efd78536137a48d78ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classpsyclone_1_1transformations_1_1ParallelLoopTrans.html">psyclone.transformations.ParallelLoopTrans</a></td></tr>
<tr class="memitem:a34b6c901cf510f32b7e74f3e0172ae13 inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34b6c901cf510f32b7e74f3e0172ae13"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__str__</b> (self)</td></tr>
<tr class="separator:a34b6c901cf510f32b7e74f3e0172ae13 inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abace2e3bf52fbcf4eae4aa122d4bae6b inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1ParallelLoopTrans.html#abace2e3bf52fbcf4eae4aa122d4bae6b">name</a> (self)</td></tr>
<tr class="separator:abace2e3bf52fbcf4eae4aa122d4bae6b inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906472dc15d586c6d75f7e361992bfd3 inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1transformations_1_1ParallelLoopTrans.html#a906472dc15d586c6d75f7e361992bfd3">apply</a> (self, node, collapse=None)</td></tr>
<tr class="separator:a906472dc15d586c6d75f7e361992bfd3 inherit pub_methods_classpsyclone_1_1transformations_1_1ParallelLoopTrans"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classpsyclone_1_1psyGen_1_1Transformation"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classpsyclone_1_1psyGen_1_1Transformation')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classpsyclone_1_1psyGen_1_1Transformation.html">psyclone.psyGen.Transformation</a></td></tr>
<tr class="memitem:a8f2f8d3c3a034a7e7c4ab7484364a058 inherit pub_methods_classpsyclone_1_1psyGen_1_1Transformation"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Transformation.html#a8f2f8d3c3a034a7e7c4ab7484364a058">name</a> (self)</td></tr>
<tr class="separator:a8f2f8d3c3a034a7e7c4ab7484364a058 inherit pub_methods_classpsyclone_1_1psyGen_1_1Transformation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8782f60c22893e81bfc619c5aa6974d inherit pub_methods_classpsyclone_1_1psyGen_1_1Transformation"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpsyclone_1_1psyGen_1_1Transformation.html#ac8782f60c22893e81bfc619c5aa6974d">apply</a> (self, args)</td></tr>
<tr class="separator:ac8782f60c22893e81bfc619c5aa6974d inherit pub_methods_classpsyclone_1_1psyGen_1_1Transformation"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5464e87dd3d820f07cbeb8f04e05cc8a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5464e87dd3d820f07cbeb8f04e05cc8a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>omp_schedule</b></td></tr>
<tr class="separator:a5464e87dd3d820f07cbeb8f04e05cc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Adds an orphaned OpenMP directive to a loop. i.e. the directive
must be inside the scope of some other OMP Parallel
REGION. This condition is tested at code-generation time. The
optional 'reprod' argument in the apply method decides whether
standard OpenMP reduction support is to be used (which is not
reproducible) or whether a manual reproducible reproduction is
to be used.

:param str omp_schedule: The OpenMP schedule to use.

For example:

&gt;&gt;&gt; from psyclone.parse import parse, ParseError
&gt;&gt;&gt; from psyclone.psyGen import PSyFactory, GenerationError
&gt;&gt;&gt; api = "gocean1.0"
&gt;&gt;&gt; filename = "nemolite2d_alg.f90"
&gt;&gt;&gt; ast, invokeInfo = parse(filename, api=api, invoke_name="invoke")
&gt;&gt;&gt; psy = PSyFactory(api).create(invokeInfo)
&gt;&gt;&gt; print psy.invokes.names
&gt;&gt;&gt;
&gt;&gt;&gt; from psyclone.psyGen import TransInfo
&gt;&gt;&gt; t = TransInfo()
&gt;&gt;&gt; ltrans = t.get_trans_name('OMPLoopTrans')
&gt;&gt;&gt; rtrans = t.get_trans_name('OMPParallelTrans')
&gt;&gt;&gt;
&gt;&gt;&gt; schedule = psy.invokes.get('invoke_0').schedule
&gt;&gt;&gt; schedule.view()
&gt;&gt;&gt; new_schedule = schedule
&gt;&gt;&gt;
# Apply the OpenMP Loop transformation to *every* loop
# in the schedule
&gt;&gt;&gt; for child in schedule.children:
&gt;&gt;&gt;     newschedule, memento = ltrans.apply(child, reprod=True)
&gt;&gt;&gt;     schedule = newschedule
&gt;&gt;&gt;
# Enclose all of these loops within a single OpenMP
# PARALLEL region
&gt;&gt;&gt; rtrans.omp_schedule("dynamic,1")
&gt;&gt;&gt; newschedule, memento = rtrans.apply(schedule.children)
&gt;&gt;&gt;
&gt;&gt;&gt;</pre> 
<p>Definition at line <a class="el" href="transformations_8py_source.html#l00522">522</a> of file <a class="el" href="transformations_8py_source.html">transformations.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a29be2b9c377e6efd78536137a48d78ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.transformations.OMPLoopTrans.apply </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>reprod</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Apply the OMPLoopTrans transformation to the specified node in a
Schedule. This node must be a Loop since this transformation
corresponds to wrapping the generated code with directives like so:

.. code-block:: fortran

  !$OMP DO
  do ...
     ...
  end do
  !$OMP END DO

At code-generation time (when
:py:meth:`OMPLoopDirective.gen_code` is called), this node must be
within (i.e. a child of) an OpenMP PARALLEL region.

The optional reprod argument will cause a reproducible
reduction to be generated if it is set to True, otherwise the default
value (as read from the psyclone.cfg file) will be used. Note,
reproducible in this case means obtaining the same results
with the same number of OpenMP threads, not for different
numbers of OpenMP threads.

:param node: the supplied node to which we will apply the \
OMPLoopTrans transformation
:type node: :py:class:`psyclone.psyGen.Node`
:param reprod: optional argument to determine whether to \
generate reproducible OpenMP reductions (True) or not \
(False). The default value is None which will cause PSyclone \
to look up a default value
:type reprod: Boolean or None
:return: (:py:class:`psyclone.psyGen.Schedule`, \
:py:class:`psyclone.undoredo.Memento`)</pre> 
<p>Definition at line <a class="el" href="transformations_8py_source.html#l00650">650</a> of file <a class="el" href="transformations_8py_source.html">transformations.py</a>.</p>

<p>References <a class="el" href="transformations_8py_source.html#l00572">psyclone.transformations.OMPLoopTrans._reprod</a>, and <a class="el" href="psyGen_8py_source.html#l02187">psyclone.psyGen.OMPDoDirective._reprod</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a29be2b9c377e6efd78536137a48d78ad">  650</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a29be2b9c377e6efd78536137a48d78ad">apply</a>(self, node, reprod=None):</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;Apply the OMPLoopTrans transformation to the specified node in a</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="stringliteral">        Schedule. This node must be a Loop since this transformation</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="stringliteral">        corresponds to wrapping the generated code with directives like so:</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="stringliteral">        .. code-block:: fortran</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="stringliteral">          !$OMP DO</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="stringliteral">          do ...</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="stringliteral">             ...</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="stringliteral">          end do</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="stringliteral">          !$OMP END DO</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="stringliteral">        At code-generation time (when</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="stringliteral">        :py:meth:`OMPLoopDirective.gen_code` is called), this node must be</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="stringliteral">        within (i.e. a child of) an OpenMP PARALLEL region.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="stringliteral">        The optional reprod argument will cause a reproducible</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="stringliteral">        reduction to be generated if it is set to True, otherwise the default</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="stringliteral">        value (as read from the psyclone.cfg file) will be used. Note,</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="stringliteral">        reproducible in this case means obtaining the same results</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="stringliteral">        with the same number of OpenMP threads, not for different</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="stringliteral">        numbers of OpenMP threads.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="stringliteral">        :param node: the supplied node to which we will apply the \</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="stringliteral">        OMPLoopTrans transformation</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="stringliteral">        :type node: :py:class:`psyclone.psyGen.Node`</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="stringliteral">        :param reprod: optional argument to determine whether to \</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="stringliteral">        generate reproducible OpenMP reductions (True) or not \</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="stringliteral">        (False). The default value is None which will cause PSyclone \</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="stringliteral">        to look up a default value</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="stringliteral">        :type reprod: Boolean or None</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="stringliteral">        :return: (:py:class:`psyclone.psyGen.Schedule`, \</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="stringliteral">        :py:class:`psyclone.undoredo.Memento`)</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> reprod:</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            self.<a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a499e911037e6eefb5162d1c6dc9de891">_reprod</a> = reprod</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">return</span> super(OMPLoopTrans, self).<a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a29be2b9c377e6efd78536137a48d78ad">apply</a>(node)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="ttc" id="classpsyclone_1_1transformations_1_1OMPLoopTrans_html_a29be2b9c377e6efd78536137a48d78ad"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a29be2b9c377e6efd78536137a48d78ad">psyclone.transformations.OMPLoopTrans.apply</a></div><div class="ttdeci">def apply(self, node, reprod=None)</div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00650">transformations.py:650</a></div></div>
<div class="ttc" id="classpsyclone_1_1transformations_1_1OMPLoopTrans_html_a499e911037e6eefb5162d1c6dc9de891"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a499e911037e6eefb5162d1c6dc9de891">psyclone.transformations.OMPLoopTrans._reprod</a></div><div class="ttdeci">_reprod</div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00572">transformations.py:572</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a219145cd3d848ae21ebfb0b09db0c66d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.transformations.OMPLoopTrans.name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the name of this transformation as a string.</pre> 
<p>Definition at line <a class="el" href="transformations_8py_source.html#l00587">587</a> of file <a class="el" href="transformations_8py_source.html">transformations.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a219145cd3d848ae21ebfb0b09db0c66d">  587</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a219145cd3d848ae21ebfb0b09db0c66d">name</a>(self):</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns the name of this transformation as a string.&#39;&#39;&#39;</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;OMPLoopTrans&quot;</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="ttc" id="classpsyclone_1_1transformations_1_1OMPLoopTrans_html_a219145cd3d848ae21ebfb0b09db0c66d"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a219145cd3d848ae21ebfb0b09db0c66d">psyclone.transformations.OMPLoopTrans.name</a></div><div class="ttdeci">def name(self)</div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00587">transformations.py:587</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47fed4d23b64453bc29ce9387004d874"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.transformations.OMPLoopTrans.omp_schedule </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the OpenMP schedule that will be specified by
    this transformation. The default schedule is 'static'.</pre> 
<p>Definition at line <a class="el" href="transformations_8py_source.html#l00592">592</a> of file <a class="el" href="transformations_8py_source.html">transformations.py</a>.</p>

<p>References <a class="el" href="transformations_8py_source.html#l00574">psyclone.transformations.OMPLoopTrans._omp_schedule</a>, and <a class="el" href="psyGen_8py_source.html#l02191">psyclone.psyGen.OMPDoDirective._omp_schedule</a>.</p>
<div class="fragment"><div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a47fed4d23b64453bc29ce9387004d874">  592</a></span>&#160;    <span class="keyword">def </span>omp_schedule(self):</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Returns the OpenMP schedule that will be specified by</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral">            this transformation. The default schedule is &#39;static&#39;.&#39;&#39;&#39;</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#ac03ecaf5fda863ae4ae19ddf12c83b9d">_omp_schedule</a></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="ttc" id="classpsyclone_1_1transformations_1_1OMPLoopTrans_html_ac03ecaf5fda863ae4ae19ddf12c83b9d"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#ac03ecaf5fda863ae4ae19ddf12c83b9d">psyclone.transformations.OMPLoopTrans._omp_schedule</a></div><div class="ttdeci">_omp_schedule</div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00574">transformations.py:574</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67f67597c60a122c6669e80a8a7a1bdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def psyclone.transformations.OMPLoopTrans.omp_schedule </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sets the OpenMP schedule that will be specified by
    this transformation. Checks that the string supplied in
    :py:obj:`value` is a recognised OpenMP schedule. </pre> 
<p>Definition at line <a class="el" href="transformations_8py_source.html#l00598">598</a> of file <a class="el" href="transformations_8py_source.html">transformations.py</a>.</p>

<p>References <a class="el" href="transformations_8py_source.html#l00574">psyclone.transformations.OMPLoopTrans._omp_schedule</a>, <a class="el" href="psyGen_8py_source.html#l02191">psyclone.psyGen.OMPDoDirective._omp_schedule</a>, <a class="el" href="transformations_8py_source.html#l00572">psyclone.transformations.OMPLoopTrans._reprod</a>, <a class="el" href="psyGen_8py_source.html#l02187">psyclone.psyGen.OMPDoDirective._reprod</a>, and <a class="el" href="transformations_8py_source.html#l00579">psyclone.transformations.OMPLoopTrans.omp_schedule</a>.</p>
<div class="fragment"><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#a67f67597c60a122c6669e80a8a7a1bdd">  598</a></span>&#160;    <span class="keyword">def </span>omp_schedule(self, value):</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; Sets the OpenMP schedule that will be specified by</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="stringliteral">            this transformation. Checks that the string supplied in</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">            :py:obj:`value` is a recognised OpenMP schedule. &#39;&#39;&#39;</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment"># Some schedules have an optional chunk size following a &#39;,&#39;</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        value_parts = value.split(<span class="stringliteral">&#39;,&#39;</span>)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> value_parts[0].lower() <span class="keywordflow">not</span> <span class="keywordflow">in</span> VALID_OMP_SCHEDULES:</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classpsyclone_1_1transformations_1_1TransformationError.html">TransformationError</a>(<span class="stringliteral">&quot;Valid OpenMP schedules are {0} &quot;</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                      <span class="stringliteral">&quot;but got {1}&quot;</span>.</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                      format(VALID_OMP_SCHEDULES,</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                             value_parts[0]))</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> len(value_parts) &gt; 1:</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">if</span> value_parts[0] == <span class="stringliteral">&quot;auto&quot;</span>:</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classpsyclone_1_1transformations_1_1TransformationError.html">TransformationError</a>(<span class="stringliteral">&quot;Cannot specify a chunk size &quot;</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                          <span class="stringliteral">&quot;when using an OpenMP schedule&quot;</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                          <span class="stringliteral">&quot; of &#39;auto&#39;&quot;</span>)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">elif</span> value_parts[1].strip() == <span class="stringliteral">&quot;&quot;</span>:</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classpsyclone_1_1transformations_1_1TransformationError.html">TransformationError</a>(<span class="stringliteral">&quot;Supplied OpenMP schedule &#39;{0}&#39;&quot;</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                          <span class="stringliteral">&quot; has missing chunk-size.&quot;</span>.</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                          format(value))</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        self.<a class="code" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#ac03ecaf5fda863ae4ae19ddf12c83b9d">_omp_schedule</a> = value</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="ttc" id="classpsyclone_1_1transformations_1_1TransformationError_html"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1TransformationError.html">psyclone.transformations.TransformationError</a></div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00054">transformations.py:54</a></div></div>
<div class="ttc" id="classpsyclone_1_1transformations_1_1OMPLoopTrans_html_ac03ecaf5fda863ae4ae19ddf12c83b9d"><div class="ttname"><a href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html#ac03ecaf5fda863ae4ae19ddf12c83b9d">psyclone.transformations.OMPLoopTrans._omp_schedule</a></div><div class="ttdeci">_omp_schedule</div><div class="ttdef"><b>Definition:</b> <a href="transformations_8py_source.html#l00574">transformations.py:574</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/psyclone/<a class="el" href="transformations_8py_source.html">transformations.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>psyclone</b></li><li class="navelem"><b>transformations</b></li><li class="navelem"><a class="el" href="classpsyclone_1_1transformations_1_1OMPLoopTrans.html">OMPLoopTrans</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
